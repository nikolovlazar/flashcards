FROM golang:1.22.6-alpine as builder

WORKDIR /app

# Install reflex
RUN go install github.com/cespare/reflex@latest

# Copy the source code
COPY . .

# Install dependencies
RUN go mod download

CMD ["reflex", "-r", "\\.go$", "-s", "--", "go", "run", "cmd/main.go"]
